import{_ as Q,r as i,w as C,p as w,q as S,s as t,t as e,aS as p,F as q,G as F,bq as G,aZ as M,H as d,aR as U,J as z,I as u,aT as N,bm as P,x as v,y as h,C as H,z as J,E as B,Q as x}from"./index.bc90a1a6.js";import{Q as A}from"./QSpace.e93ae0b1.js";import{Q as R}from"./QTd.6b6bfcad.js";import{Q as Z}from"./QTable.da9f4085.js";import{u as K}from"./cursos.5ad1e744.js";import{Q as L}from"./QEditor.9e7150e4.js";import{Q as W}from"./QForm.d8ddec26.js";import{C as T}from"./ClosePopup.36ee2ee1.js";import{h as X}from"./moment.40bc58bf.js";import"./QList.ac9043eb.js";import"./QSelect.1664c3a2.js";import"./position-engine.8c426333.js";import"./selection.bbfae355.js";import"./QItemLabel.d3c30afe.js";import"./QMenu.456c4d11.js";import"./rtl.b51694b1.js";import"./use-fullscreen.28de194d.js";import"./useNotify.98763d5b.js";import"./QBtnDropdown.eeb13d3b.js";import"./QTooltip.059a9529.js";const $={props:{curso:{type:Object,default:()=>({nome_curso:"",descricao:"",duracao:""})},showModal:Boolean,loading:Boolean,isEditForm:Boolean},emits:["save"],setup(r,{emit:a}){const s=i({nome_curso:"",descricao:"",duracao:"",escola_id:""}),o=i(!1),m=()=>{a("save",s.value)},f=()=>{s.value={nome_curso:"",descricao:"",duracao:"",escola_id:""},o.value=!1};return C(()=>r.curso,l=>{l&&(s.value={...l},o.value=!0)},{immediate:!0}),C(()=>r.showModal,l=>{show.value=l}),C(()=>r.isEditForm,l=>{o.value=l}),C(()=>r.loading,l=>{l!=!0&&(s.value.nome_curso="",s.value.descricao="",s.value.duracao="",s.value.escola_id="")}),{form:s,emitForm:m,show:i(r.showModal),statusForm:i(r.isEditForm),closeForm:f}}},oo={key:0,class:"q-ml-sm"},eo={key:1,class:"q-ml-sm"},lo={class:"col-12"};function ao(r,a,s,o,m,f){return w(),S(P,{modelValue:o.show,"onUpdate:modelValue":a[4]||(a[4]=l=>o.show=l),persistent:""},{default:t(()=>[e(N,null,{default:t(()=>[e(p,{class:"row items-center"},{default:t(()=>[e(q,{icon:s.isEditForm?"mdi-file-edit":"mdi-school",color:s.isEditForm?"green-9":"dark","text-color":"white"},null,8,["icon","color"]),s.isEditForm?(w(),F("span",oo,"Alterar curso")):(w(),F("span",eo,"Cadastro de novo curso"))]),_:1}),e(W,{onSubmit:G(o.emitForm,["prevent"])},{default:t(()=>[e(p,{class:"row q-col-gutter-sm"},{default:t(()=>[e(M,{modelValue:o.form.nome_curso,"onUpdate:modelValue":a[0]||(a[0]=l=>o.form.nome_curso=l),label:"Nome do curso",dense:"",outlined:"",clearable:"",placeholder:"Nome",class:"col-xs-12 col-sm-12 col-md-6 col-lg-6",rules:[l=>!!l||"Porfavor informe o nome do curso"]},null,8,["modelValue","rules"]),d("div",lo,[e(L,{modelValue:o.form.descricao,"onUpdate:modelValue":a[1]||(a[1]=l=>o.form.descricao=l),label:"Descri\xE7\xE3o",dense:"",outlined:"",clearable:"",placeholder:"Descri\xE7\xE3o",rules:[l=>!!l||"Porfavor escreva a descri\xE7\xE3o do curso"]},null,8,["modelValue","rules"])]),e(M,{modelValue:o.form.duracao,"onUpdate:modelValue":a[2]||(a[2]=l=>o.form.duracao=l),label:"Dura\xE7\xE3o do curso",dense:"",outlined:"",clearable:"",placeholder:"Dura\xE7\xE3o",class:"col-xs-12 col-sm-12 col-md-6 col-lg-6",rules:[l=>!!l||"Porfavor informe a dura\xE7\xE3o do curso"]},null,8,["modelValue","rules"])]),_:1}),e(U,{class:"bg-grey-3"},{default:t(()=>[z(e(u,{outline:"","no-caps":"",label:"Cancelar",color:"red-9",icon:"mdi-close",onClick:a[3]||(a[3]=l=>o.closeForm())},null,512),[[T]]),e(A),e(u,{type:"submit",outline:"","no-caps":"",label:s.isEditForm?"Actualizar":"Cadastrar",color:"green-10",icon:s.isEditForm?"mdi-update":"mdi-database-plus",loading:s.loading},null,8,["label","icon","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])}var so=Q($,[["render",ao]]);const ro={props:{showModal2:Boolean,showInformation:{type:Object,required:!0}},setup(r){return{momentDate:X(r.showInformation.created_at).format("DD/MM/YYYY"),showInfor:i(r.showModal2)}}},no=d("span",{class:"q-ml-sm"},"Mais informa\xE7\xF5es do curso",-1),to=d("b",null,"Curso: ",-1),io=d("b",null,"Descri\xE7\xE3o: ",-1),co=d("b",null,"Dura\xE7\xE3o do curso: ",-1),uo=d("b",null,"Data do registo: ",-1);function mo(r,a,s,o,m,f){return w(),S(P,{modelValue:o.showInfor,"onUpdate:modelValue":a[0]||(a[0]=l=>o.showInfor=l),persistent:""},{default:t(()=>[e(N,null,{default:t(()=>[e(p,{class:"row items-center"},{default:t(()=>[e(q,{icon:"mdi-information-outline",color:"blue-4","text-color":"white",size:"50px"}),no]),_:1}),e(p,{class:"row q-col-gutter-sm"},{default:t(()=>[d("p",null,[to,v(h(s.showInformation.nome_curso),1)]),d("p",null,[io,v(h(s.showInformation.descricao),1)]),d("p",null,[co,v(h(s.showInformation.duracao),1)]),d("p",null,[uo,v(h(o.momentDate),1)])]),_:1}),e(U,{class:"bg-grey-3"},{default:t(()=>[z(e(u,{outline:"","no-caps":"",label:"Fechar",color:"red-9",icon:"mdi-close"},null,512),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var fo=Q(ro,[["render",mo]]);const vo=[{name:"nome_curso",label:"Nome do curso",align:"left",field:"nome_curso",sortable:!0},{name:"duracao",label:"Dura\xE7\xE3o do curso",align:"left",field:"duracao",sortable:!0},{name:"options",label:"Op\xE7\xF5es",align:"left",field:"options",sortable:!0}],_o={components:{alunosForm:so,showInformation:fo},setup(){const r=i(!1),a=i(!1),{user:s}=H(),o=i(!1),{addCurso:m,cursoCountByEscolaId:f,deleteCursoById:l,getAllCursos:V,getCursoById:c,updateCursoById:g,getEscolaIdByEmail:Y}=K(),y=i(""),I=i(!1),O=i(""),j=i(""),k=i({}),D=i({}),E=i([]);J(()=>{b()});const b=()=>{r.value=!0,Y(s.value.email).then(n=>{y.value=n,V(n).then(_=>{E.value=_,r.value=!1})})};return{rows:E,columns:vo,search:O,filter:j,loading:r,edit:n=>{console.log(n),k.value={...n},a.value=!0,I.value=!0},remove:async n=>{r.value=!0;try{await l(n),b()}catch(_){console.log(_)}finally{b(),r.value=!1}},formModal:n=>{a.value=!1,I.value=!0},curso:k,showModal:I,handleSave:async n=>{try{r.value=!0,n.escola_id=y.value,a.value?await g(n.id,n):await m(n)}catch(_){console.log(_)}finally{r.value=!1,b()}},formStatus:a,cursoCountByEscolaId:f,escolaId:y,information:n=>{console.log(n),D.value={...n},o.value=!0},showModal2:o,cursoInfo:D}}},ho=d("br",null,null,-1),wo=d("br",null,null,-1),go={class:""},bo={class:"text-red-10"};function Co(r,a,s,o,m,f){const l=B("alunosForm"),V=B("showInformation");return w(),F("div",null,[ho,wo,e(Z,{flat:"",dense:"",bordered:"",rows:o.rows,columns:o.columns,"row-key":"id",filter:o.filter,loading:o.loading,class:"q-mt-lg"},{"top-left":t(()=>[d("span",null,[d("div",go,[e(x,{name:"mdi-school",size:"md"}),v(" Cursos [ "),d("b",bo,h(o.cursoCountByEscolaId(o.escolaId)),1),v(" ] ")])])]),"top-right":t(()=>[e(M,{color:"primary",modelValue:o.filter,"onUpdate:modelValue":a[0]||(a[0]=c=>o.filter=c),lable:"Pesquisar",placeholder:"Pesquisar",dense:"",outlined:"",class:"q-mr-md"},{append:t(()=>[e(x,{name:"search"})]),_:1},8,["modelValue"]),e(A),e(u,{outline:"",color:"primary",disable:o.loading,label:"Novo curso",onClick:o.formModal,"no-caps":"",icon:"mdi-database-plus",filter:o.filter},null,8,["disable","onClick","filter"])]),"body-cell-options":t(c=>[e(R,{props:c},{default:t(()=>[e(u,{flat:"",dense:"",icon:"mdi-file-edit-outline",color:"green-9",onClick:g=>o.edit(c.row),size:"sm"},null,8,["onClick"]),e(u,{flat:"",dense:"",icon:"mdi-delete-outline",color:"red-9",onClick:g=>o.remove(c.row.id),loading:o.loading,size:"sm"},null,8,["onClick","loading"]),e(u,{flat:"",dense:"",icon:"mdi-information-outline",color:"grey-9",onClick:g=>o.information(c.row),size:"sm"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"]),e(l,{modelValue:o.showModal,"onUpdate:modelValue":a[1]||(a[1]=c=>o.showModal=c),curso:o.curso,onSave:o.handleSave,loading:o.loading,isEditForm:o.formStatus},null,8,["modelValue","curso","onSave","loading","isEditForm"]),e(V,{modelValue:o.showModal2,"onUpdate:modelValue":a[2]||(a[2]=c=>o.showModal2=c),showInformation:o.cursoInfo},null,8,["modelValue","showInformation"])])}var Jo=Q(_o,[["render",Co]]);export{Jo as default};
