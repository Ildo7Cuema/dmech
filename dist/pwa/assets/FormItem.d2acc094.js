import{_ as S,D as q,bp as k,r as U,f as A,z as x,P as m,p as f,q as V,s as p,t as l,bq as B,H as g,y as F,aZ as r,N as s,G as M,K as T,v as b,I as y,aU as D,aV as L}from"./index.bc90a1a6.js";import{Q as O}from"./QSelect.1664c3a2.js";import{Q as R}from"./QForm.d8ddec26.js";import{Q as j}from"./QPage.f48c0666.js";import{a as G,b as H}from"./QLayout.c9624849.js";import{u as K}from"./useNotify.98763d5b.js";import{u as Z}from"./userApi.9d724f7f.js";import{u as h}from"./use-quasar.c935fd80.js";import{b as J,i as W}from"./inputVisual.14accdd7.js";import"./position-engine.8c426333.js";import"./selection.bbfae355.js";import"./QItemLabel.d3c30afe.js";import"./QMenu.456c4d11.js";import"./rtl.b51694b1.js";const X={name:"form-categoria",setup(){const{postEscola:n,getById:a,update:C,remove:e,uploadImage:w}=Z(),{notifyError:d,notifySuccess:o}=K(),t="escolas",_=q(),I=h(),P=k(),Q=U(["Ensino prim\xE1rio","Ensino m\xE9dio","Ensino superior"]),u=U({name:"",numero:"",num_decreto:"",nivel_ensino:"",provincia:"",municipio:"",natureza_escola:"",tipo_escola:"",salas_professores:"",salas_alunos:"",email:"",password:"",phone:"",role:"Admin-Escola"}),c=A(()=>P.params.id);x(()=>{c.value&&E(t,c.value)});const z=async i=>{try{I.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar a ${i.name} ?`,cancel:!0,persistent:!0}).onOk(async()=>{m.show({message:"Apagando informa\xE7\xE3o da escola..."}),await e(t,i.id),_.push({name:"escolas"}),o("Escola apagada com sucesso")})}catch(v){d(v.message)}finally{m.hide()}},E=async(i,v)=>{try{m.show({message:"Carregando informa\xE7\xF5es"}),u.value=await a(i,v)}catch(N){d(N.message)}finally{m.hide()}};return{form:u,isUpdate:c,table:t,deletarItem:z,addItems:async()=>{try{c.value?(m.show({message:"Actualiza\xE7\xE3o em processamento"}),await C(t,u.value),o("Escola actualizada com sucesso")):(m.show({message:"Cadastro em processamento"}),await n(t,u.value),o("Escola cadastrada com sucesso"))}catch(i){console.log(i),d(i.message)}finally{m.hide(),_.push({name:"escolas"})}},btnConfig:J,inputConfig:W,options:Q}}},Y=n=>(D("data-v-09cabe6e"),n=n(),L(),n),$={class:"col-12 text-body3 text-center q-mt-lg"},oo={class:"col-md-6 col-sm-6 col-xs-10 q-gutter-y-sm"},eo={key:0},ao=Y(()=>g("div",{class:"col-12 text-center"},[g("b",null,"Atribuir uma conta para a escola")],-1));function lo(n,a,C,e,w,d){return f(),V(G,null,{default:p(()=>[l(H,null,{default:p(()=>[l(j,{padding:""},{default:p(()=>[l(R,{class:"row justify-center",onSubmit:B(e.addItems,["prevent"])},{default:p(()=>[g("p",$,F(e.isUpdate?"Actualizar dados da escola":"Cadastro de Escolas"),1),g("div",oo,[l(r,s({modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.form.name=o),label:"Nome da escola",class:"col-12",rules:[o=>!!o||"Porfavor digite o nome da escola"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.numero,"onUpdate:modelValue":a[1]||(a[1]=o=>e.form.numero=o),label:"N\xBA da escola",class:"col-6",rules:[o=>!!o||"Porfavor digite o n\xBA da escola"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.num_decreto,"onUpdate:modelValue":a[2]||(a[2]=o=>e.form.num_decreto=o),label:"N\xBA do decreto",class:"col-6",rules:[o=>!!o||"Porfavor digite o n\xBA do decreto de cria\xE7\xE3o"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(O,s({modelValue:e.form.nivel_ensino,"onUpdate:modelValue":a[3]||(a[3]=o=>e.form.nivel_ensino=o),options:e.options,label:"Nivel de ensino",class:"col-12"},{...e.inputConfig},{rules:[o=>!!o||"Selecione o nivel de ensino"]}),null,16,["modelValue","options","rules"]),l(r,s({modelValue:e.form.provincia,"onUpdate:modelValue":a[4]||(a[4]=o=>e.form.provincia=o),label:"Provincia",class:"col-6",rules:[o=>!!o||"Porfavor informe o nome da prov\xEDncia"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.municipio,"onUpdate:modelValue":a[5]||(a[5]=o=>e.form.municipio=o),label:"Munic\xEDpio",class:"col-6",rules:[o=>!!o||"Porfavor informe o nome do munic\xEDpio"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.natureza_escola,"onUpdate:modelValue":a[6]||(a[6]=o=>e.form.natureza_escola=o),label:"Natureza da escola",class:"col-6",rules:[o=>!!o||"Porfavor informe a natureza da escola"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.tipo_escola,"onUpdate:modelValue":a[7]||(a[7]=o=>e.form.tipo_escola=o),label:"Tipo de escola",class:"col-6",rules:[o=>!!o||"Porfavor informe o tipo de escola"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.salas_professores,"onUpdate:modelValue":a[8]||(a[8]=o=>e.form.salas_professores=o),label:"Total de salas de professores",class:"col-6",rules:[o=>!!o||"N\xBA total de salas de professores"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.salas_alunos,"onUpdate:modelValue":a[9]||(a[9]=o=>e.form.salas_alunos=o),label:"Total de salas de alunos",class:"col-6",rules:[o=>!!o||"N\xBA total de salas de alunos"]},{...e.inputConfig}),null,16,["modelValue","rules"]),e.isUpdate==null?(f(),M("div",eo,[l(T),ao,l(r,s({modelValue:e.form.email,"onUpdate:modelValue":a[10]||(a[10]=o=>e.form.email=o),type:"email",label:"Informe o e-mail da escola",class:"col-6",rules:[o=>!!o||"Porfavor informe um e-mail"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.password,"onUpdate:modelValue":a[11]||(a[11]=o=>e.form.password=o),type:"password",label:"Informe uma palavra passe",class:"col-6",rules:[o=>!!o||"Porfavor uma palavra passe"]},{...e.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:e.form.phone,"onUpdate:modelValue":a[12]||(a[12]=o=>e.form.phone=o),label:"Informe o contacto do respons\xE1vel",class:"col-6",rules:[o=>!!o||"Porfavor uma contacto do respons\xE1vel",o=>o.length==9||"O n\xBA de telem\xF3vel deve conter 9 caracter"]},{...e.inputConfig}),null,16,["modelValue","rules"])])):b("",!0),l(y,s({type:"submit",icon:e.isUpdate?"mdi-file-edit-outline":"mdi-content-save-all",color:"info",class:"full-width",label:e.isUpdate?"Actualizar escola":"Cadastrar escola"},{...e.btnConfig}),null,16,["icon","label"]),n.$q.platform.is.mobile&&e.isUpdate?(f(),V(y,{key:1,onClick:a[13]||(a[13]=o=>e.deletarItem(e.form)),icon:"mdi-delete-empty",color:"secondary",class:"full-width",label:"Apagar escola"})):b("",!0),n.$q.platform.is.mobile?(f(),V(y,s({key:2,icon:"mdi-format-list-bulleted",class:"full-width q-pa-sm",label:"Lista de escolas",to:{name:"escolas"}},{...e.btnConfig}),null,16)):b("",!0)])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}var Co=S(X,[["render",lo],["__scopeId","data-v-09cabe6e"]]);export{Co as default};
