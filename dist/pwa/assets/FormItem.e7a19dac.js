import{_ as Q,R as k,bo as A,r as E,k as S,o as q,T as m,H as f,I as v,J as p,K as l,bp as x,W as g,N as B,aY as r,a0 as s,V as T,Y as F,L as b,X as y,aU as L,aV as M}from"./index.35821edc.js";import{Q as R}from"./QForm.68d4e1ce.js";import{Q as h}from"./QPage.a66fc822.js";import{a as O,b as Y}from"./QLayout.d35a44ea.js";import{u as j}from"./useNotify.4729e429.js";import{u as D}from"./userApi.885d4b06.js";import{u as H}from"./use-quasar.0c1c42d6.js";import{b as J,i as K}from"./inputVisual.14accdd7.js";const W={name:"form-categoria",setup(){const{postEscola:n,getById:e,update:C,remove:a,uploadImage:w}=D(),{notifyError:d,notifySuccess:o}=j(),i="escolas",_=k(),I=H(),U=A(),u=E({name:"",numero:"",num_decreto:"",provincia:"",municipio:"",natureza_escola:"",tipo_escola:"",salas_professores:"",salas_alunos:"",email:"",password:"",phone:"",role:"Admin-Escola"}),c=S(()=>U.params.id);q(()=>{c.value&&z(i,c.value)});const P=async t=>{try{I.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar a ${t.name} ?`,cancel:!0,persistent:!0}).onOk(async()=>{m.show({message:"Apagando informa\xE7\xE3o da escola..."}),await a(i,t.id),_.push({name:"escolas"}),o("Escola apagada com sucesso")})}catch(V){d(V.message)}finally{m.hide()}},z=async(t,V)=>{try{m.show({message:"Carregando informa\xE7\xF5es"}),u.value=await e(t,V)}catch(N){d(N.message)}finally{m.hide()}};return{form:u,isUpdate:c,table:i,deletarItem:P,addItems:async()=>{try{c.value?(m.show({message:"Actualiza\xE7\xE3o em processamento"}),await C(i,u.value),o("Escola actualizada com sucesso")):(m.show({message:"Cadastro em processamento"}),await n(i,u.value),o("Escola cadastrada com sucesso"))}catch(t){console.log(t),d(t.message)}finally{m.hide(),_.push({name:"escolas"})}},btnConfig:J,inputConfig:K}}},X=n=>(L("data-v-e3b175a0"),n=n(),M(),n),G={class:"col-12 text-body3 text-center q-mt-lg"},Z={class:"col-md-6 col-sm-6 col-xs-10 q-gutter-y-sm"},$={key:0},oo=X(()=>g("div",{class:"col-12 text-center"},[g("b",null,"Atribuir uma conta para a escola")],-1));function ao(n,e,C,a,w,d){return f(),v(O,null,{default:p(()=>[l(Y,null,{default:p(()=>[l(h,{padding:""},{default:p(()=>[l(R,{class:"row justify-center",onSubmit:x(a.addItems,["prevent"])},{default:p(()=>[g("p",G,B(a.isUpdate?"Actualizar dados da escola":"Cadastro de Escolas"),1),g("div",Z,[l(r,s({modelValue:a.form.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.form.name=o),label:"Nome da escola",class:"col-12",rules:[o=>!!o||"Porfavor digite o nome da escola"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.numero,"onUpdate:modelValue":e[1]||(e[1]=o=>a.form.numero=o),label:"N\xBA da escola",class:"col-6",rules:[o=>!!o||"Porfavor digite o n\xBA da escola"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.num_decreto,"onUpdate:modelValue":e[2]||(e[2]=o=>a.form.num_decreto=o),label:"N\xBA do decreto",class:"col-6",rules:[o=>!!o||"Porfavor digite o n\xBA do decreto de cria\xE7\xE3o"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.provincia,"onUpdate:modelValue":e[3]||(e[3]=o=>a.form.provincia=o),label:"Provincia",class:"col-6",rules:[o=>!!o||"Porfavor informe o nome da prov\xEDncia"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.municipio,"onUpdate:modelValue":e[4]||(e[4]=o=>a.form.municipio=o),label:"Munic\xEDpio",class:"col-6",rules:[o=>!!o||"Porfavor informe o nome do munic\xEDpio"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.natureza_escola,"onUpdate:modelValue":e[5]||(e[5]=o=>a.form.natureza_escola=o),label:"Natureza da escola",class:"col-6",rules:[o=>!!o||"Porfavor informe a natureza da escola"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.tipo_escola,"onUpdate:modelValue":e[6]||(e[6]=o=>a.form.tipo_escola=o),label:"Tipo de escola",class:"col-6",rules:[o=>!!o||"Porfavor informe o tipo de escola"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.salas_professores,"onUpdate:modelValue":e[7]||(e[7]=o=>a.form.salas_professores=o),label:"Total de salas de professores",class:"col-6",rules:[o=>!!o||"N\xBA total de salas de professores"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.salas_alunos,"onUpdate:modelValue":e[8]||(e[8]=o=>a.form.salas_alunos=o),label:"Total de salas de alunos",class:"col-6",rules:[o=>!!o||"N\xBA total de salas de alunos"]},{...a.inputConfig}),null,16,["modelValue","rules"]),a.isUpdate==null?(f(),T("div",$,[l(F),oo,l(r,s({modelValue:a.form.email,"onUpdate:modelValue":e[9]||(e[9]=o=>a.form.email=o),type:"email",label:"Informe o e-mail da escola",class:"col-6",rules:[o=>!!o||"Porfavor informe um e-mail"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.password,"onUpdate:modelValue":e[10]||(e[10]=o=>a.form.password=o),type:"password",label:"Informe uma palavra passe",class:"col-6",rules:[o=>!!o||"Porfavor uma palavra passe"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(r,s({modelValue:a.form.phone,"onUpdate:modelValue":e[11]||(e[11]=o=>a.form.phone=o),label:"Informe o contacto do respons\xE1vel",class:"col-6",rules:[o=>!!o||"Porfavor uma contacto do respons\xE1vel",o=>o.length==9||"O n\xBA de telem\xF3vel deve conter 9 caracter"]},{...a.inputConfig}),null,16,["modelValue","rules"])])):b("",!0),l(y,s({type:"submit",icon:a.isUpdate?"mdi-file-edit-outline":"mdi-content-save-all",color:"info",class:"full-width",label:a.isUpdate?"Actualizar escola":"Cadastrar escola"},{...a.btnConfig}),null,16,["icon","label"]),n.$q.platform.is.mobile&&a.isUpdate?(f(),v(y,{key:1,onClick:e[12]||(e[12]=o=>a.deletarItem(a.form)),icon:"mdi-delete-empty",color:"secondary",class:"full-width",label:"Apagar escola"})):b("",!0),n.$q.platform.is.mobile?(f(),v(y,s({key:2,icon:"mdi-format-list-bulleted",class:"full-width q-pa-sm",label:"Lista de escolas",to:{name:"escolas"}},{...a.btnConfig}),null,16)):b("",!0)])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}var co=Q(W,[["render",ao],["__scopeId","data-v-e3b175a0"]]);export{co as default};
