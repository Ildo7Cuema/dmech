import{_ as V,n as z,r as C,C as N,D as A,f as D,z as S,E as B,p as s,q as m,s as o,P as d,t as a,G as k,aZ as E,N as p,Q as L,I as l,v as u,x as g,H as T,L as x,M as F,J as M,F as O,y as R,K as U,ap as G}from"./index.bc90a1a6.js";import{Q as H}from"./QSpace.e93ae0b1.js";import{Q as w}from"./QTooltip.059a9529.js";import{Q as J}from"./QTd.6b6bfcad.js";import{Q as K}from"./QTable.da9f4085.js";import{a as Z,Q as h}from"./position-engine.8c426333.js";import{Q as j}from"./QItemLabel.d3c30afe.js";import{Q as W}from"./QList.ac9043eb.js";import{Q as X}from"./QPageSticky.981a4856.js";import{Q as Y}from"./QPage.f48c0666.js";import{a as ee,b as ae}from"./QLayout.c9624849.js";import{u as oe}from"./userApi.9d724f7f.js";import{u as te}from"./useNotify.98763d5b.js";import{u as re}from"./use-quasar.c935fd80.js";import{f as se}from"./formatCurrency.6090a7ed.js";import{b as ie,i as le}from"./inputVisual.14accdd7.js";import{s as ne}from"./vue-json-excel.esm.ee4efc73.js";import"./selection.bbfae355.js";import"./QSelect.1664c3a2.js";import"./QMenu.456c4d11.js";import"./rtl.b51694b1.js";import"./use-fullscreen.28de194d.js";const me=[{name:"categoria",label:"Nome de categoria",align:"left",field:"categoria",sortable:!0},{name:"actions",label:"Op\xE7\xF5es",align:"left",field:"actions",sortable:!0}],ce={"Nome da categoria":"categoria","Vencimento base":"salario_base","Vencimento l\xEDquido":"salario_liquido"};const de=z({components:{DownloadExcel:ne},setup(){const e=C([]),{list:c,remove:_}=oe(),{user:r}=N(),b=A(),y=re(),f=C(""),t="categorias",{notifyError:n,notifySuccess:q}=te(),Q=async()=>{d.show({message:"Carregado categorias"});try{e.value=await c(t,v.value)}catch(i){n(i.message)}finally{d.hide()}},I=async i=>{try{y.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar a categoria ${i.categoria} ?`,cancel:!0,persistent:!0}).onOk(async()=>{d.show({message:"Apagando categoria..."}),await _(t,i.id),Q(),q("categoria apagada com sucesso")})}catch(P){n(P.message)}finally{d.hide()}},$=i=>{b.push({name:"form-categoria",params:{id:i.id}})},v=D(()=>r.value.id!=r.value.user_metadata.organization_id?(console.log(r.value.user_metadata.organization_id),r.value.user_metadata.organization_id):(console.log(r.value.id),r.value.id));return S(()=>{Q()}),{columns:me,alterarItem:$,formatCurrency:se,deletarItem:I,categorias:e,btnConfig:ie,inputConfig:le,filter:f,fields:ce,isDiferentID:v}}}),ue={key:0,class:"row"},fe={class:"row text-body3 text-h5 flex-center q-pa-lg bg-secondary text-white"};function pe(e,c,_,r,b,y){const f=B("download-excel");return s(),m(ee,null,{default:o(()=>[a(ae,null,{default:o(()=>[a(Y,{padding:""},{default:o(()=>[e.$q.platform.is.desktop?(s(),k("div",ue,[a(K,{rows:e.categorias,flat:"",bordered:"",columns:e.columns,"row-key":"id",class:"col-12","virtual-scroll":"",filter:e.filter},{top:o(()=>[a(E,p({class:"",type:"text",label:"Pesquisar"},{...e.inputConfig},{modelValue:e.filter,"onUpdate:modelValue":c[0]||(c[0]=t=>e.filter=t)}),{prepend:o(()=>[a(L,{name:"mdi-magnify"})]),_:1},16,["modelValue"]),a(H),e.$q.platform.is.desktop?(s(),m(l,p({key:0,icon:"mdi-plus",label:"Cadastrar nova categoria"},{...e.btnConfig},{to:{name:"form-categoria"}}),null,16)):u("",!0),a(f,{data:e.categorias,fields:e.fields,worksheet:"Categorias",name:"categorias.xls",class:"q-ml-md"},{default:o(()=>[a(l,p({icon:"mdi-file-excel",label:"Exportar uma lista"},{...e.btnConfig}),null,16)]),_:1},8,["data","fields"])]),"body-cell-actions":o(t=>[a(J,{props:t,class:"q-gutter-x-sm text-center"},{default:o(()=>[a(l,{icon:"mdi-pencil-outline",color:"primary",flat:"",dense:"",size:"sm",onClick:n=>e.alterarItem(t.row)},{default:o(()=>[a(w,null,{default:o(()=>[g("Alterar")]),_:1})]),_:2},1032,["onClick"]),a(l,{icon:"mdi-delete-outline",color:"secondary",dense:"",flat:"",size:"sm",onClick:n=>e.deletarItem(t.row)},{default:o(()=>[a(w,null,{default:o(()=>[g("Apagar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])])):u("",!0),e.$q.platform.is.mobile?(s(),m(W,{key:1,bordered:""},{default:o(()=>[T("div",fe,[a(l,{flat:"",icon:"mdi-shape-outline",label:"Categorias"})]),(s(!0),k(F,null,x(e.categorias,t=>M((s(),m(Z,{key:t.id,class:"q-mb-sm",clickable:"",onClick:n=>e.alterarItem(t)},{default:o(()=>[a(h,{avatar:""},{default:o(()=>[a(O,{color:"primary","text-color":"white",icon:"mdi-shape"})]),_:1}),a(h,null,{default:o(()=>[a(j,null,{default:o(()=>[g(R(t.categoria),1)]),_:2},1024)]),_:2},1024),a(U)]),_:2},1032,["onClick"])),[[G]])),128))]),_:1})):u("",!0),e.$q.platform.is.mobile?(s(),m(X,{key:2,class:"margin-bottom",position:"bottom-right",offset:[18,18]},{default:o(()=>[a(l,{fab:"",icon:"mdi-plus",color:"primary",to:{name:"form-categoria"}})]),_:1})):u("",!0)]),_:1})]),_:1})]),_:1})}var Le=V(de,[["render",pe],["__scopeId","data-v-963188bc"]]);export{Le as default};
