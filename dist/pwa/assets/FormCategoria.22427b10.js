import{_ as z,D as P,bp as A,r as I,f as S,z as U,P as t,p as u,q as g,s as n,t as r,bq as V,H as h,y as x,aZ as B,N as y,I as f,v as b}from"./index.bc90a1a6.js";import{Q as N}from"./QSpace.e93ae0b1.js";import{Q as F}from"./QForm.d8ddec26.js";import{Q as R}from"./QPageSticky.981a4856.js";import{Q as D}from"./QPage.f48c0666.js";import{a as L,b as M}from"./QLayout.c9624849.js";import{i as j,b as E}from"./inputVisual.14accdd7.js";import{u as H}from"./useNotify.98763d5b.js";import{u as O}from"./userApi.9d724f7f.js";import{u as Z}from"./use-quasar.c935fd80.js";const G={name:"form-categoria",setup(){const{post:i,getById:o,update:C,remove:a}=O(),_=Z(),{notifyError:c,notifySuccess:e}=H(),l="categorias",v=P(),w=A(),m=I({categoria:""}),d=S(()=>w.params.id);U(()=>{d.value&&q(l,d.value)});const Q=async s=>{try{_.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar a categoria ${s.categoria} ?`,cancel:!0,persistent:!0}).onOk(async()=>{t.show({message:"Apagando categoria..."}),await a(l,s.id),v.push({name:"categorias"}),e("categoria apagada com sucesso")})}catch(p){c(p.message)}finally{t.hide()}},q=async(s,p)=>{try{t.show({message:"Carregando informa\xE7\xF5es"}),m.value=await o(s,p)}catch(k){c(k.message)}finally{t.hide()}};return{form:m,isUpdate:d,deletarItem:Q,table:l,addCategoria:async()=>{try{d.value?(t.show({message:"Actualiza\xE7\xE3o em processamento"}),await C(l,m.value),e("Categoria actualizada com sucesso")):(t.show({message:"Cadastro em processamento"}),await i(l,m.value),e("Categoria cadastrada com sucesso"))}catch(s){c(s.message)}finally{t.hide(),v.push({name:"categorias"})}},inputConfig:j,btnConfig:E}}},J={class:"col-12 text-body3 text-center q-mt-lg"},K={class:"col-md-4 col-sm-6 col-xs-10 q-gutter-y-sm"};function T(i,o,C,a,_,c){return u(),g(L,null,{default:n(()=>[r(M,null,{default:n(()=>[r(D,{padding:""},{default:n(()=>[r(F,{class:"row justify-center",onSubmit:V(a.addCategoria,["prevent"])},{default:n(()=>[h("p",J,x(a.isUpdate?"Actualizar categoria":"Registo de categorias"),1),h("div",K,[r(B,y({modelValue:a.form.categoria,"onUpdate:modelValue":o[0]||(o[0]=e=>a.form.categoria=e),label:"Categoria",class:"col-12","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor digite o nome da categoria"]},{...a.inputConfig}),null,16,["modelValue","rules"]),r(f,y({type:"submit",icon:a.isUpdate?"mdi-file-edit-outline":"mdi-content-save-all",color:"primary",class:"full-width",label:a.isUpdate?"Actualizar categoria":"Cadastrar categoria"},{...a.btnConfig}),null,16,["icon","label"]),i.$q.platform.is.mobile&&a.isUpdate?(u(),g(f,{key:0,onClick:o[1]||(o[1]=e=>a.deletarItem(a.form)),icon:"mdi-delete-empty",color:"secondary",class:"full-width",label:"Apagar categoria"})):b("",!0),r(N),i.$q.platform.is.mobile?(u(),g(f,y({key:1,icon:"mdi-format-list-bulleted",class:"full-width q-pa-sm",label:"Lista de categorias",flat:"",to:{name:"categorias"}},{...a.btnConfig}),null,16)):b("",!0)])]),_:1},8,["onSubmit"]),i.$q.platform.is.mobile?(u(),g(R,{key:0,class:"margin-bottom",position:"bottom-right",offset:[18,18],onClick:o[2]||(o[2]=e=>a.form="")},{default:n(()=>[r(f,{fab:"",icon:"mdi-plus",color:"primary",to:{name:"form-categoria"}})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})}var la=z(G,[["render",T],["__scopeId","data-v-5199bc60"]]);export{la as default};
