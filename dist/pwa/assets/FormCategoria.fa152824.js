import{_ as z,R as A,bo as I,r as P,k as S,o as U,T as t,H as u,I as g,J as n,K as r,bp as V,W as h,N as x,aY as B,a0 as y,X as f,L as b}from"./index.35821edc.js";import{Q as N}from"./QSpace.d25d6d7b.js";import{Q as R}from"./QForm.68d4e1ce.js";import{Q as F}from"./QPageSticky.0b6d8f0a.js";import{Q as L}from"./QPage.a66fc822.js";import{a as M,b as j}from"./QLayout.d35a44ea.js";import{i as D,b as E}from"./inputVisual.14accdd7.js";import{u as H}from"./useNotify.4729e429.js";import{u as J}from"./userApi.885d4b06.js";import{u as K}from"./use-quasar.0c1c42d6.js";const O={name:"form-categoria",setup(){const{post:i,getById:o,update:C,remove:a}=J(),_=K(),{notifyError:c,notifySuccess:e}=H(),l="categorias",v=A(),w=I(),m=P({categoria:""}),d=S(()=>w.params.id);U(()=>{d.value&&k(l,d.value)});const Q=async s=>{try{_.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar a categoria ${s.categoria} ?`,cancel:!0,persistent:!0}).onOk(async()=>{t.show({message:"Apagando categoria..."}),await a(l,s.id),v.push({name:"categorias"}),e("categoria apagada com sucesso")})}catch(p){c(p.message)}finally{t.hide()}},k=async(s,p)=>{try{t.show({message:"Carregando informa\xE7\xF5es"}),m.value=await o(s,p)}catch(q){c(q.message)}finally{t.hide()}};return{form:m,isUpdate:d,deletarItem:Q,table:l,addCategoria:async()=>{try{d.value?(t.show({message:"Actualiza\xE7\xE3o em processamento"}),await C(l,m.value),e("Categoria actualizada com sucesso")):(t.show({message:"Cadastro em processamento"}),await i(l,m.value),e("Categoria cadastrada com sucesso"))}catch(s){c(s.message)}finally{t.hide(),v.push({name:"categorias"})}},inputConfig:D,btnConfig:E}}},T={class:"col-12 text-body3 text-center q-mt-lg"},W={class:"col-md-4 col-sm-6 col-xs-10 q-gutter-y-sm"};function X(i,o,C,a,_,c){return u(),g(M,null,{default:n(()=>[r(j,null,{default:n(()=>[r(L,{padding:""},{default:n(()=>[r(R,{class:"row justify-center",onSubmit:V(a.addCategoria,["prevent"])},{default:n(()=>[h("p",T,x(a.isUpdate?"Actualizar categoria":"Registo de categorias"),1),h("div",W,[r(B,y({modelValue:a.form.categoria,"onUpdate:modelValue":o[0]||(o[0]=e=>a.form.categoria=e),label:"Categoria",class:"col-12","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor digite o nome da categoria"]},{...a.inputConfig}),null,16,["modelValue","rules"]),r(f,y({type:"submit",icon:a.isUpdate?"mdi-file-edit-outline":"mdi-content-save-all",color:"primary",class:"full-width",label:a.isUpdate?"Actualizar categoria":"Cadastrar categoria"},{...a.btnConfig}),null,16,["icon","label"]),i.$q.platform.is.mobile&&a.isUpdate?(u(),g(f,{key:0,onClick:o[1]||(o[1]=e=>a.deletarItem(a.form)),icon:"mdi-delete-empty",color:"secondary",class:"full-width",label:"Apagar categoria"})):b("",!0),r(N),i.$q.platform.is.mobile?(u(),g(f,y({key:1,icon:"mdi-format-list-bulleted",class:"full-width q-pa-sm",label:"Lista de categorias",flat:"",to:{name:"categorias"}},{...a.btnConfig}),null,16)):b("",!0)])]),_:1},8,["onSubmit"]),i.$q.platform.is.mobile?(u(),g(F,{key:0,class:"margin-bottom",position:"bottom-right",offset:[18,18],onClick:o[2]||(o[2]=e=>a.form="")},{default:n(()=>[r(f,{fab:"",icon:"mdi-plus",color:"primary",to:{name:"form-categoria"}})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})}var la=z(O,[["render",X],["__scopeId","data-v-5199bc60"]]);export{la as default};
