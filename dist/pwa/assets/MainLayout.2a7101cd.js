import{d as W,u as re,e as ne,f as _,w as b,i as le,g as I,r as D,h as ie,o as se,j as ue,k as T,l as me,m as ce,n as X,_ as z,p as i,q as c,s as o,t,Q as de,v as C,x as y,y as H,z as Y,B as fe,C as pe,D as ve,E as S,P as F,F as $,G as M,H as Z,I as j,J as P,K as ge,L as _e,M as be,N as he}from"./index.bc90a1a6.js";import{Q as q}from"./QToolbarTitle.39e8995d.js";import{Q as ke}from"./QSpace.e93ae0b1.js";import{Q as G,a as K}from"./QHeader.0e611f4f.js";import{Q as w}from"./QItemLabel.d3c30afe.js";import{Q as N,a as L}from"./position-engine.8c426333.js";import{Q as J}from"./QList.ac9043eb.js";import{Q as ye}from"./QBtnDropdown.eeb13d3b.js";import{Q as we}from"./QDrawer.9509f7de.js";import{Q as Qe,a as Ce,b as Ne}from"./QLayout.c9624849.js";import{u as De,a as $e,b as Me,Q as Ve}from"./QTabs.af356025.js";import{C as E}from"./ClosePopup.36ee2ee1.js";import{b as Le}from"./btnBackPage.38abf012.js";import{u as x}from"./use-quasar.c935fd80.js";import{u as Se}from"./userApi.9d724f7f.js";import"./selection.bbfae355.js";import"./QMenu.456c4d11.js";import"./TouchPan.4e4cfbcb.js";import"./rtl.b51694b1.js";var R=W({name:"QRouteTab",props:{...re,...De},emits:$e,setup(e,{slots:l,emit:u}){const s=ne({useDisableForRouterLinkProps:!1}),{renderTab:a,$tabs:d}=Me(e,l,u,{exact:_(()=>e.exact),...s});return b(()=>`${e.name} | ${e.exact} | ${(s.resolvedLink.value||{}).href}`,()=>{d.verifyRouteModel()}),()=>a(s.linkTag.value,s.linkAttrs.value)}}),Pe=W({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:l,emit:u}){const{proxy:{$q:s}}=me(),a=le(ce,I);if(a===I)return console.error("QFooter needs to be child of QLayout"),I;const d=D(parseInt(e.heightHint,10)),m=D(!0),h=D(ie.value===!0||a.isContainer.value===!0?0:window.innerHeight),f=_(()=>e.reveal===!0||a.view.value.indexOf("F")!==-1||s.platform.is.ios&&a.isContainer.value===!0),k=_(()=>a.isContainer.value===!0?a.containerHeight.value:h.value),v=_(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return m.value===!0?d.value:0;const r=a.scroll.value.position+k.value+d.value-a.height.value;return r>0?r:0}),B=_(()=>e.modelValue!==!0||f.value===!0&&m.value!==!0),O=_(()=>e.modelValue===!0&&B.value===!0&&e.reveal===!0),A=_(()=>"q-footer q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(B.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(f.value!==!0?" hidden":""):"")),n=_(()=>{const r=a.rows.value.bottom,p={};return r[0]==="l"&&a.left.space===!0&&(p[s.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),r[2]==="r"&&a.right.space===!0&&(p[s.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),p});function g(r,p){a.update("footer",r,p)}function Q(r,p){r.value!==p&&(r.value=p)}function ee({height:r}){Q(d,r),g("size",r)}function ae(){if(e.reveal!==!0)return;const{direction:r,position:p,inflectionPoint:oe}=a.scroll.value;Q(m,r==="up"||p-oe<100||a.height.value-k.value-p-d.value<300)}function te(r){O.value===!0&&Q(m,!0),u("focusin",r)}b(()=>e.modelValue,r=>{g("space",r),Q(m,!0),a.animate()}),b(v,r=>{g("offset",r)}),b(()=>e.reveal,r=>{r===!1&&Q(m,e.modelValue)}),b(m,r=>{a.animate(),u("reveal",r)}),b([d,a.scroll,a.height],ae),b(()=>s.screen.height,r=>{a.isContainer.value!==!0&&Q(h,r)});const U={};return a.instances.footer=U,e.modelValue===!0&&g("size",d.value),g("space",e.modelValue),g("offset",v.value),se(()=>{a.instances.footer===U&&(a.instances.footer=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const r=ue(l.default,[T(Qe,{debounce:0,onResize:ee})]);return e.elevated===!0&&r.push(T("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),T("footer",{class:A.value,style:n.value,onFocusin:te},r)}}});const qe=X({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},routeName:{type:String,default:""},icon:{type:String,default:""}}});function Ee(e,l,u,s,a,d){return i(),c(L,{clickable:"",to:{name:e.routeName},exact:""},{default:o(()=>[e.icon?(i(),c(N,{key:0,avatar:""},{default:o(()=>[t(de,{name:e.icon},null,8,["name"])]),_:1})):C("",!0),t(N,null,{default:o(()=>[t(w,null,{default:o(()=>[y(H(e.title),1)]),_:1}),t(w,{caption:""},{default:o(()=>[y(H(e.caption),1)]),_:1})]),_:1})]),_:1},8,["to"])}var Re=z(qe,[["render",Ee]]);const V=[{title:"Home",caption:"painel de controle",icon:"mdi-home",routeName:"admin"},{title:"Categorias",caption:"informa\xE7\xF5es de categorias de funcion\xE1rios",icon:"mdi-shape",routeName:"categorias"},{title:"Escolas",caption:"nforma\xE7\xF5es gerais de escolas",icon:"mdi-school",routeName:"escolas"},{title:"Funcion\xE1rios",caption:"dados de funcion\xE1rios",icon:"mdi-account-tie",routeName:"funcionarios"},{title:"Servi\xE7os",caption:"Servi\xE7os gerais",icon:"mdi-widgets",routeName:"page-service"},{title:"Configura\xE7\xF5es",caption:"Servi\xE7os gerais",icon:"mdi-cog",routeName:"form-config"},{title:"Secretaria - Geral",caption:"Buscar e gerar documentos",icon:"mdi-text-box",routeName:"dservico"},{title:"Meus documentos",caption:"ver e baixar documentos",icon:"mdi-dock-window",routeName:"myDocument"}],He={setup(){const e=D(!1),l=x();return b(e,u=>{l.dark.set(u),l.localStorage.set("darkMode",u)}),Y(()=>{l.localStorage.getItem("darkMode")&&(e.value=!0)}),{darkmode:e}}};function Be(e,l,u,s,a,d){return i(),c(fe,{modelValue:s.darkmode,"onUpdate:modelValue":l[0]||(l[0]=m=>s.darkmode=m),"checked-icon":"mdi-moon-waxing-crescent",color:"black","unchecked-icon":"mdi-white-balance-sunning"},null,8,["modelValue"])}var Ie=z(He,[["render",Be]]);const Te=X({name:"MainLayout",components:{EssentialLink:Re,darkmodeChange:Ie,btnBackPageVue:Le},setup(){const{getBrand:e,brand:l}=Se(),u=D(!1),{logout:s,user:a,updateUserIDOrganization:d}=pe(),m=x(),h=D("home"),f=ve();Y(()=>{e()});const k=_(()=>a.value.email=="ildocuema@gmail.com"?V.filter(n=>{if(n.routeName=="admin"||n.routeName=="page-service"||n.routeName=="categorias"||n.routeName=="escolas"||n.routeName=="funcionarios"||n.routeName=="form-config")return a.value.user_metadata.email=="ildocuema@gmail.com"}):a.value.email!="ildocuema@gmail.com"&&a.value.user_metadata.role=="RH-DME"?V.filter(n=>{if(n.routeName=="admin"||n.routeName=="categorias"||n.routeName=="escolas"||n.routeName=="funcionarios")return a.value.user_metadata.role=="RH-DME"}):a.value.email!="ildocuema@gmail.com"&&a.value.user_metadata.role=="Secretaria-DME"?V.filter(n=>{if(n.routeName=="admin"||n.routeName=="dservico")return a.value.user_metadata.role=="Secretaria-DME"}):a.value.email!="ildocuema@gmail.com"&&a.value.user_metadata.role=="Docente"?V.filter(n=>{if(n.routeName=="admin"||n.routeName=="myDocument")return a.value.user_metadata.role=="Docente"}):V.filter(n=>{}));return{logout:s,logoutPage:async()=>{try{m.dialog({title:"SAIR",message:"Voc\xEA realmente deseja sa\xEDr?",cancel:!0,persistent:!0}).onOk(async()=>{F.show({message:"Sair da aplica\xE7\xE3o ..."}),await s().finally(()=>F.hide()),f.replace({path:"/login"})})}catch(n){console.log(n.message)}finally{F.hide()}},user:a,tab:h,essentialLinks:k,leftDrawerOpen:u,brand:l,formConfig:()=>{f.push({name:"form-config"})},toggleLeftDrawer(){u.value=!u.value},allowdMenuItems:k,meuPerfil:()=>{f.push({name:"meu-perfil"})},acesso_permissao:()=>{f.push({name:"acesso_permissao"})}}}}),Fe={key:0},ze={class:"q-ml-sm"},Oe={key:1},Ae=Z("span",{class:"q-ml-sm"},"D.M.E",-1),Ue=[Ae],je={key:0},Ge={key:1};function Ke(e,l,u,s,a,d){const m=S("btn-back-page-vue"),h=S("darkmode-change"),f=S("EssentialLink"),k=S("router-view");return i(),c(Ce,{view:"lHh Lpr lFf"},{default:o(()=>[t(K,{bordered:"",class:"bg-primary-3 text-white"},{default:o(()=>[t(G,null,{default:o(()=>[t(q,null,{default:o(()=>[t($,{color:"white","text-color":"brown-5",icon:"mdi-school-outline"}),e.brand.name?(i(),M("span",Fe,[Z("span",ze,H(e.brand.name),1)])):(i(),M("span",Oe,Ue))]),_:1}),t(ke),e.$q.platform.is.mobile?(i(),c(q,{key:0},{default:o(()=>[t(m)]),_:1})):C("",!0),t(h),t(j,{dense:"",flat:"",class:"q-ml-sm",icon:"mdi-power",onClick:e.logoutPage},null,8,["onClick"])]),_:1})]),_:1}),e.$q.platform.is.desktop?(i(),c(K,{key:0,elevated:""},{default:o(()=>[t(G,null,{default:o(()=>[t(j,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),t(q,null,{default:o(()=>[e.brand.name?(i(),M("span",je,H(e.brand.name),1)):(i(),M("span",Ge,"D.M.E"))]),_:1}),t(q,null,{default:o(()=>[t(m)]),_:1}),t(h),e.user&&e.$q.platform.is.desktop?(i(),c(ye,{key:0,flat:"",icon:"person",label:e.user.user_metadata.name},{default:o(()=>[t(J,null,{default:o(()=>[P((i(),c(L,{clickable:"",onClick:e.meuPerfil},{default:o(()=>[t(N,null,{default:o(()=>[t(w,null,{default:o(()=>[t($,{icon:"mdi-account"}),y(" Meu perfil ")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[E]]),e.user.email=="ildocuema@gmail.com"?P((i(),c(L,{key:0,clickable:"",onClick:e.acesso_permissao},{default:o(()=>[t(N,null,{default:o(()=>[t(w,null,{default:o(()=>[t($,{icon:"mdi-account-cog"}),y(" Utilizadores ")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[E]]):C("",!0),P((i(),c(L,{clickable:"",onClick:e.formConfig},{default:o(()=>[t(N,null,{default:o(()=>[t(w,null,{default:o(()=>[t($,{icon:"mdi-cog"}),y(" Configura\xE7\xF5es")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[E]]),t(ge),P((i(),c(L,{clickable:"",onClick:e.logoutPage},{default:o(()=>[t(N,null,{default:o(()=>[t(w,null,{default:o(()=>[t($,{icon:"mdi-logout"}),y("Sair")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[E]])]),_:1})]),_:1},8,["label"])):C("",!0)]),_:1})]),_:1})):C("",!0),t(we,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":l[0]||(l[0]=v=>e.leftDrawerOpen=v),"show-if-above":"",bordered:""},{default:o(()=>[t(J,null,{default:o(()=>[t(w,{header:""},{default:o(()=>[y(" Menu ")]),_:1}),(i(!0),M(be,null,_e(e.essentialLinks,v=>(i(),c(f,he({key:v.title},v),null,16))),128))]),_:1})]),_:1},8,["modelValue"]),t(Ne,null,{default:o(()=>[t(k)]),_:1}),e.$q.platform.is.mobile?(i(),c(Pe,{key:1,bordered:"",class:"bg-grey-3 text-primary"},{default:o(()=>[t(Ve,{"no-caps":"","active-color":"primary","indicator-color":"transparent",class:"text-primary-8",modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=v=>e.tab=v),"narrow-indicator":"",align:"justify",dense:""},{default:o(()=>[t(R,{name:"home",label:"Home",icon:"mdi-home",to:{name:"admin"}}),t(R,{name:"services",label:"Cadastros",icon:"mdi-database-cog-outline",to:{name:"services-page"}}),t(R,{name:"services",label:"servi\xE7os",icon:"mdi-widgets",to:{name:"page-service"}}),t(R,{name:"config",label:"Configura\xE7\xF5es",icon:"mdi-cog",to:{name:"form-config"}})]),_:1},8,["modelValue"])]),_:1})):C("",!0)]),_:1})}var fa=z(Te,[["render",Ke]]);export{fa as default};
