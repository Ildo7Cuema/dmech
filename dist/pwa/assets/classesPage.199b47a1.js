import{_ as M,r,f as E,w as y,p as f,q as P,s as c,t as a,aS as I,F as z,G as w,y as u,aR as Y,J as T,I as v,aT as W,bm as L,H as d,x as p,L as ee,M as oe,C as le,z as se,E as U,Q as N,aZ as ae}from"./index.e70dc7e8.js";import{Q as O}from"./QSpace.cccfce51.js";import{Q as ne}from"./QTd.e931d9bd.js";import{Q as ie}from"./QTable.324e303e.js";import{u as te}from"./classes.b7b7d12e.js";import{u as re}from"./cursos.717f0f89.js";import{u as de}from"./disciplinas.81aefc90.js";import{Q as F}from"./QSelect.9e4cb652.js";import{Q as ce}from"./QForm.7b26f9a5.js";import{C as j}from"./ClosePopup.39a76e78.js";import{h as me}from"./moment.40bc58bf.js";import"./QList.9cd80ca5.js";import"./use-fullscreen.63635d9e.js";import"./useNotify.e83fbf31.js";import"./position-engine.1f1eaf41.js";import"./selection.ded15137.js";import"./QItemLabel.f0026656.js";import"./QMenu.704bcb1b.js";import"./rtl.b51694b1.js";const ue={props:{nome:String,classes:{type:Array,required:!0},cursos:{type:Array,required:!0},disciplinas:{type:Array,required:!0},showModal:Boolean,loading:Boolean,isEditForm:Boolean},emits:["saveClasse"],setup(n,{emit:o}){const l=r({nome_classe:"",disciplina_id:[],escola_id:"",curso_id:""}),e=r(!1),C=()=>{o("saveClasse",l.value)},_=()=>{l.value={nome_classe:"",disciplina_id:[],escola_id:"",curso_id:""},e.value=!1},s=E(()=>n.nome.endsWith("a")?"da":"do"),g=E(()=>n.nome.endsWith("a")?"nova":"novo");return y(()=>n.showModal,i=>{show.value=i}),y(()=>n.classes,i=>{i&&(l.value={...i})},{immediate:!0}),y(()=>n.isEditForm,i=>{e.value=i}),y(()=>n.loading,i=>{i!=!0&&(l.value.nome_periodo="",l.value.escola_id="",l.value.descricao="")}),{form:l,emitForm:C,artigo1:s,artigo2:g,show:r(n.showModal),statusForm:r(n.isEditForm),closeForm:_}}},fe={key:0,class:"q-ml-sm"},_e={key:1,class:"q-ml-sm"};function ve(n,o,l,e,C,_){return f(),P(L,{modelValue:e.show,"onUpdate:modelValue":o[5]||(o[5]=s=>e.show=s),persistent:""},{default:c(()=>[a(W,null,{default:c(()=>[a(I,{class:"row items-center"},{default:c(()=>[a(z,{icon:l.isEditForm?"mdi-file-edit":"mdi-clock-outline",color:l.isEditForm?"green-9":"dark","text-color":"white"},null,8,["icon","color"]),l.isEditForm?(f(),w("span",fe,"Alterar "+u(l.nome),1)):(f(),w("span",_e,"Cadastro de "+u(e.artigo2)+" "+u(l.nome),1))]),_:1}),a(ce,null,{default:c(()=>[a(I,{class:"row q-col-gutter-sm"},{default:c(()=>[a(F,{modelValue:e.form.nome_classe,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.nome_classe=s),label:"Classes",dense:"",outlined:"",clearable:"",options:l.classes,rules:[s=>s&&s.length>0||"Por favor selecione uma classe"],"option-value":"nome","option-label":"nome","map-options":"","emit-value":"",class:"col-12"},null,8,["modelValue","options","rules"]),a(F,{modelValue:e.form.curso_id,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.curso_id=s),label:"Curso",dense:"",outlined:"",clearable:"",options:l.cursos,"option-value":"id","option-label":"nome_curso","map-options":"","emit-value":"",class:"col-12",rules:[s=>s&&s.length>0||"Por favor selecione pelo menos um curso"]},null,8,["modelValue","options","rules"]),a(F,{modelValue:e.form.disciplina_id,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.disciplina_id=s),label:"Disciplina",dense:"",outlined:"",multiple:"",clearable:"",options:l.disciplinas,"option-value":"id","option-label":"nome_disciplina","map-options":"","emit-value":"",class:"col-12",rules:[s=>s&&s.length>0||"Por favor selecione pelo menos uma disciplina"]},null,8,["modelValue","options","rules"])]),_:1}),a(Y,{class:"bg-grey-3"},{default:c(()=>[T(a(v,{outline:"","no-caps":"",label:"Cancelar",color:"red-9",icon:"mdi-close",onClick:o[3]||(o[3]=s=>e.closeForm())},null,512),[[j]]),a(O),a(v,{onClick:o[4]||(o[4]=s=>e.emitForm()),outline:"","no-caps":"",label:l.isEditForm?"Actualizar":"Cadastrar",color:"green-10",icon:l.isEditForm?"mdi-update":"mdi-database-plus",loading:l.loading},null,8,["label","icon","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Ce=M(ue,[["render",ve]]);const ge={props:{nome:String,showModal2:Boolean,showInformation:{type:Object,required:!0},classesEdisciplinas:{type:Array,required:!0}},setup(n){const o=me(n.showInformation.created_at).format("DD/MM/YYYY"),l=E(()=>n.nome.endsWith("a")||n.nome.endsWith("e")?"da":"do");return{momentDate:o,artigo:l,showInfor:r(n.showModal2)}}},he={class:"q-ml-sm"},pe=d("b",null,"Nome: ",-1),we={class:"col-12"},be=d("b",null,"Nome da escola: ",-1),ye={class:"col-12 text-left"},Ie=d("b",{class:"text-red-9"},"Disciplinas pertecente a classe:",-1),Ve=d("b",null,"Data de registo:",-1);function Fe(n,o,l,e,C,_){return f(),P(L,{modelValue:e.showInfor,"onUpdate:modelValue":o[0]||(o[0]=s=>e.showInfor=s),persistent:""},{default:c(()=>[a(W,null,{default:c(()=>[a(I,{class:"row items-center"},{default:c(()=>[a(z,{icon:"mdi-information-outline",color:"blue-4","text-color":"white",size:"50px"}),d("span",he,"Mais informa\xE7\xF5es "+u(e.artigo)+" "+u(l.nome),1)]),_:1}),a(I,{class:"row q-col-gutter-sm"},{default:c(()=>[d("p",null,[pe,p(u(l.showInformation.nome_classe),1)]),d("div",we,[d("p",null,[be,p(u(l.showInformation.escola.name),1)])]),d("div",ye,[d("ul",null,[Ie,(f(!0),w(oe,null,ee(l.classesEdisciplinas,s=>(f(),w("li",{key:s.id},u(s.disciplinas.nome_disciplina),1))),128))])]),d("p",null,[Ve,p(" "+u(e.momentDate),1)])]),_:1}),a(Y,{class:"bg-grey-3"},{default:c(()=>[T(a(v,{outline:"","no-caps":"",label:"Fechar",color:"red-9",icon:"mdi-close"},null,512),[[j]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Ee=M(ge,[["render",Fe]]);const Me=[{name:"nome_classe",label:"Nome de classes frequentadas",align:"left",field:"nome_classe",sortable:!0},{name:"escola.name",label:"A sua escola",align:"left",field:n=>n.escola.name,sortable:!0},{name:"options",label:"Op\xE7\xF5es",align:"left",field:"options",sortable:!0}],Qe={components:{ClassesForm:Ce,showInformation:Ee},setup(){const n=r(!1),o=r(!1),{user:l}=le(),e=r(!1);new Date().getFullYear();const{addClasse:_,classesCountByEscolaId:s,deleteClasseById:g,getAllClasses:i,getClasseById:Q,updateClasseById:G,getEscolaIdByEmail:k,getClassesDisciplinas:H}=te(),{getAllDisciplinas:J}=de(),{getAllCursos:R}=re(),h=r(""),V=r(!1),Z=r(""),K=r(""),X=r({}),S=r([]),q=r([]),D=r([]),B=r([{id:0,nome:"1\xAA Classe"},{id:1,nome:"2\xAA Classe"},{id:2,nome:"3\xAA Classe"},{id:3,nome:"4\xAA Classe"},{id:4,nome:"5\xAA Classe"},{id:5,nome:"6\xAA Classe"},{id:6,nome:"7\xAA Classe"},{id:7,nome:"8\xAA Classe"},{id:8,nome:"9\xAA Classe"},{id:9,nome:"10\xAA Classe"},{id:10,nome:"11\xAA Classe"},{id:11,nome:"12\xAA Classe"},{id:12,nome:"13\xAA Classe"}]),x=r({}),A=r([]);se(()=>{b(),$()});const b=()=>{n.value=!0,k(l.value.email).then(t=>{h.value=t,J(h.value).then(m=>{S.value=m}),i(t).then(m=>{A.value=m,n.value=!1})})},$=()=>{n.value=!0,k(l.value.email).then(t=>{h.value=t,R(t).then(m=>{q.value=m,n.value=!1})})};return{rows:A,columns:Me,search:Z,filter:K,loading:n,edit:t=>{console.log(t),B.value={...t},o.value=!0,V.value=!0},remove:async t=>{n.value=!0;try{await g(t),b()}catch(m){console.log(m)}finally{b(),n.value=!1}},formModal:t=>{o.value=!1,V.value=!0},classe:X,showModal:V,handleSave:async t=>{console.log(t);try{n.value=!0,t.escola_id=h.value,o.value?await G(t.id,t):await _(t)}catch(m){console.log(m)}finally{n.value=!1,b()}},formStatus:o,classesCountByEscolaId:s,escolaId:h,information:async t=>{x.value={...t},await H(t.id).then(m=>{D.value=m}),e.value=!0},showModal2:e,ClasseInfo:x,classes:B,disciplinas:S,classesDisciplinaInfo:D,cursos:q}}},ke=d("br",null,null,-1),Se=d("br",null,null,-1),qe={class:""},De={class:"text-red-10"};function Be(n,o,l,e,C,_){const s=U("ClassesForm"),g=U("showInformation");return f(),w("div",null,[ke,Se,a(ie,{flat:"",dense:"",bordered:"",rows:e.rows,columns:e.columns,"row-key":"id",filter:e.filter,loading:e.loading,class:"q-mt-lg"},{"top-left":c(()=>[d("span",null,[d("div",qe,[a(N,{name:"mdi-school",size:"md"}),p(" Classes [ "),d("b",De,u(e.classesCountByEscolaId(e.escolaId)),1),p(" ] ")])])]),"top-right":c(()=>[a(ae,{color:"primary",modelValue:e.filter,"onUpdate:modelValue":o[0]||(o[0]=i=>e.filter=i),lable:"Pesquisar",placeholder:"Pesquisar",dense:"",outlined:"",class:"q-mr-md"},{append:c(()=>[a(N,{name:"search"})]),_:1},8,["modelValue"]),a(O),a(v,{outline:"",color:"primary",disable:e.loading,label:"Nova Classe",onClick:e.formModal,"no-caps":"",icon:"mdi-database-plus",filter:e.filter},null,8,["disable","onClick","filter"])]),"body-cell-options":c(i=>[a(ne,{props:i},{default:c(()=>[a(v,{flat:"",dense:"",icon:"mdi-delete-outline",color:"red-9",onClick:Q=>e.remove(i.row.id),loading:e.loading,size:"sm"},null,8,["onClick","loading"]),a(v,{flat:"",dense:"",icon:"mdi-information-outline",color:"grey-9",onClick:Q=>e.information(i.row),size:"sm"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"]),a(s,{modelValue:e.showModal,"onUpdate:modelValue":o[1]||(o[1]=i=>e.showModal=i),onSaveClasse:e.handleSave,loading:e.loading,isEditForm:e.formStatus,cursos:e.cursos,classes:e.classes,nome:"classe",disciplinas:e.disciplinas},null,8,["modelValue","onSaveClasse","loading","isEditForm","cursos","classes","disciplinas"]),a(g,{modelValue:e.showModal2,"onUpdate:modelValue":o[2]||(o[2]=i=>e.showModal2=i),showInformation:e.ClasseInfo,classesEdisciplinas:e.classesDisciplinaInfo,nome:"classe"},null,8,["modelValue","showInformation","classesEdisciplinas"])])}var ao=M(Qe,[["render",Be]]);export{ao as default};
