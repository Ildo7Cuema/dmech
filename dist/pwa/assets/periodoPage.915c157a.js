import{_ as Q,r as m,f as F,w as I,p as w,q as D,s as i,t as l,aS as C,F as A,G as M,y as c,bq as Z,aZ as U,H as s,aR as z,J as N,I as _,aT as Y,bm as T,E as P,x as v,C as K,z as L,Q as x}from"./index.bc90a1a6.js";import{Q as O}from"./QSpace.e93ae0b1.js";import{Q as X}from"./QTd.6b6bfcad.js";import{Q as $}from"./QTable.da9f4085.js";import{u as oo}from"./periodos.f16bf4a3.js";import{u as eo}from"./cursos.5ad1e744.js";import{Q as lo}from"./QEditor.9e7150e4.js";import{Q as ao}from"./QForm.d8ddec26.js";import{C as W}from"./ClosePopup.36ee2ee1.js";import{h as no}from"./moment.40bc58bf.js";import"./QList.ac9043eb.js";import"./QSelect.1664c3a2.js";import"./position-engine.8c426333.js";import"./selection.bbfae355.js";import"./QItemLabel.d3c30afe.js";import"./QMenu.456c4d11.js";import"./rtl.b51694b1.js";import"./use-fullscreen.28de194d.js";import"./useNotify.98763d5b.js";import"./QBtnDropdown.eeb13d3b.js";import"./QTooltip.059a9529.js";const to={props:{nome:String,cursos:{type:Array},periodo:{type:Object},showModal:Boolean,loading:Boolean,isEditForm:Boolean},emits:["save"],setup(a,{emit:n}){const e=m({nome_periodo:"",escola_id:"",descricao:""}),o=m(!1),g=()=>{n("save",e.value)},h=()=>{e.value={nome_periodo:"",escola_id:"",descricao:""},o.value=!1},d=F(()=>a.nome.endsWith("a")?"da":"do"),u=F(()=>a.nome.endsWith("a")?"nova":"novo");return I(()=>a.periodo,t=>{t&&(e.value={...t},o.value=!0)},{immediate:!0}),I(()=>a.showModal,t=>{show.value=t}),I(()=>a.isEditForm,t=>{o.value=t}),I(()=>a.loading,t=>{t!=!0&&(e.value.nome_periodo="",e.value.escola_id="",e.value.descricao="")}),{form:e,emitForm:g,artigo1:d,artigo2:u,show:m(a.showModal),statusForm:m(a.isEditForm),closeForm:h}}},ro={key:0,class:"q-ml-sm"},so={key:1,class:"q-ml-sm"},io={class:"col-12"};function mo(a,n,e,o,g,h){return w(),D(T,{modelValue:o.show,"onUpdate:modelValue":n[3]||(n[3]=d=>o.show=d),persistent:""},{default:i(()=>[l(Y,null,{default:i(()=>[l(C,{class:"row items-center"},{default:i(()=>[l(A,{icon:e.isEditForm?"mdi-file-edit":"mdi-clock-outline",color:e.isEditForm?"green-9":"dark","text-color":"white"},null,8,["icon","color"]),e.isEditForm?(w(),M("span",ro,"Alterar "+c(e.nome),1)):(w(),M("span",so,"Cadastro de "+c(o.artigo2)+" "+c(e.nome),1))]),_:1}),l(ao,{onSubmit:Z(o.emitForm,["prevent"])},{default:i(()=>[l(C,{class:"row q-col-gutter-sm"},{default:i(()=>[l(U,{modelValue:o.form.nome_periodo,"onUpdate:modelValue":n[0]||(n[0]=d=>o.form.nome_periodo=d),label:"Nome"+o.artigo1+" "+e.nome,dense:"",outlined:"",clearable:"",placeholder:e.nome,class:"col-xs-12 col-sm-12 col-md-6 col-lg-6",rules:[d=>!!d||"Porfavor informe o nome "+o.artigo1+" "+e.nome]},null,8,["modelValue","label","placeholder","rules"]),s("div",io,[l(lo,{modelValue:o.form.descricao,"onUpdate:modelValue":n[1]||(n[1]=d=>o.form.descricao=d),label:"Descri\xE7\xE3o",dense:"",outlined:"",clearable:"",placeholder:"Descri\xE7\xE3o"},null,8,["modelValue"])])]),_:1}),l(z,{class:"bg-grey-3"},{default:i(()=>[N(l(_,{outline:"","no-caps":"",label:"Cancelar",color:"red-9",icon:"mdi-close",onClick:n[2]||(n[2]=d=>o.closeForm())},null,512),[[W]]),l(O),l(_,{type:"submit",outline:"","no-caps":"",label:e.isEditForm?"Actualizar":"Cadastrar",color:"green-10",icon:e.isEditForm?"mdi-update":"mdi-database-plus",loading:e.loading},null,8,["label","icon","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])}var co=Q(to,[["render",mo]]);const uo={props:{nome:String,showModal2:Boolean,showInformation:{type:Object,required:!0}},setup(a){const n=no(a.showInformation.created_at).format("DD/MM/YYYY"),e=F(()=>a.nome.endsWith("a")?"da":"do");return{momentDate:n,artigo:e,showInfor:m(a.showModal2)}}},fo={class:"q-ml-sm"},_o=s("b",null,"Per\xEDodo: ",-1),ho=s("br",null,null,-1),vo=s("b",null,"Nome da escola:",-1),go=s("br",null,null,-1),wo=s("b",null,"Descri\xE7\xE3o: ",-1),bo=s("br",null,null,-1),po=s("b",null,"Data de registo:",-1);function yo(a,n,e,o,g,h){const d=P("q-html");return w(),D(T,{modelValue:o.showInfor,"onUpdate:modelValue":n[0]||(n[0]=u=>o.showInfor=u),persistent:""},{default:i(()=>[l(Y,null,{default:i(()=>[l(C,{class:"row items-center"},{default:i(()=>[l(A,{icon:"mdi-information-outline",color:"blue-4","text-color":"white",size:"50px"}),s("span",fo,"Mais informa\xE7\xF5es "+c(o.artigo)+" "+c(e.nome),1)]),_:1}),l(C,{class:"row q-col-gutter-sm"},{default:i(()=>[s("p",null,[_o,v(c(e.showInformation.nome_periodo),1)]),ho,s("p",null,[vo,v(c(e.showInformation.escola.name),1)]),go,s("p",null,[wo,l(d,null,{default:i(()=>[v(c(e.showInformation.descricao),1)]),_:1})]),bo,s("p",null,[po,v(" "+c(o.momentDate),1)])]),_:1}),l(z,{class:"bg-grey-3"},{default:i(()=>[N(l(_,{outline:"","no-caps":"",label:"Fechar",color:"red-9",icon:"mdi-close"},null,512),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Io=Q(uo,[["render",yo]]);const Co=[{name:"nome_periodo",label:"Nome do per\xEDodo",align:"left",field:"nome_periodo",sortable:!0},{name:"escola.name",label:"A sua escola",align:"left",field:a=>a.escola.name,sortable:!0},{name:"options",label:"Op\xE7\xF5es",align:"left",field:"options",sortable:!0}],Vo={components:{PeriodosForm:co,showInformation:Io},setup(){const a=m(!1),n=m(!1),{user:e}=K(),o=m(!1),h=new Date().getFullYear(),{addPeriodo:d,periodosCountByEscolaId:u,deletePeriodoById:t,getAllPeriodos:b,getPeriodoById:So,updatePeriodoById:j,getEscolaIdByEmail:k}=oo(),{getAllCursos:G}=eo(),p=m(""),V=m(!1),H=m(""),J=m(""),S=m({}),E=m([]),B=m({}),q=m([]);L(()=>{y(),R()});const y=()=>{a.value=!0,k(e.value.email).then(r=>{p.value=r,b(r).then(f=>{q.value=f,a.value=!1})})},R=()=>{a.value=!0,k(e.value.email).then(r=>{p.value=r,G(r).then(f=>{E.value=f,a.value=!1})})};return{rows:q,columns:Co,search:H,filter:J,loading:a,edit:r=>{console.log(r),S.value={...r},n.value=!0,V.value=!0},remove:async r=>{a.value=!0;try{await t(r),y()}catch(f){console.log(f)}finally{y(),a.value=!1}},formModal:r=>{n.value=!1,V.value=!0},periodo:S,showModal:V,handleSave:async r=>{console.log(r);try{a.value=!0,r.escola_id=p.value,r.ano=h,n.value?await j(r.id,r):await d(r)}catch(f){console.log(f)}finally{a.value=!1,y()}},formStatus:n,periodosCountByEscolaId:u,escolaId:p,information:r=>{console.log(r),B.value={...r},o.value=!0},showModal2:o,PeriodoInfo:B,cursos:E}}},Fo=s("br",null,null,-1),Mo=s("br",null,null,-1),Po={class:""},Qo={class:"text-red-10"};function ko(a,n,e,o,g,h){const d=P("PeriodosForm"),u=P("showInformation");return w(),M("div",null,[Fo,Mo,l($,{flat:"",dense:"",bordered:"",rows:o.rows,columns:o.columns,"row-key":"id",filter:o.filter,loading:o.loading,class:"q-mt-lg"},{"top-left":i(()=>[s("span",null,[s("div",Po,[l(x,{name:"mdi-school",size:"md"}),v(" Periodos [ "),s("b",Qo,c(o.periodosCountByEscolaId(o.escolaId)),1),v(" ] ")])])]),"top-right":i(()=>[l(U,{color:"primary",modelValue:o.filter,"onUpdate:modelValue":n[0]||(n[0]=t=>o.filter=t),lable:"Pesquisar",placeholder:"Pesquisar",dense:"",outlined:"",class:"q-mr-md"},{append:i(()=>[l(x,{name:"search"})]),_:1},8,["modelValue"]),l(O),l(_,{outline:"",color:"primary",disable:o.loading,label:"Novo Periodo",onClick:o.formModal,"no-caps":"",icon:"mdi-database-plus",filter:o.filter},null,8,["disable","onClick","filter"])]),"body-cell-options":i(t=>[l(X,{props:t},{default:i(()=>[l(_,{flat:"",dense:"",icon:"mdi-file-edit-outline",color:"green-9",onClick:b=>o.edit(t.row),size:"sm"},null,8,["onClick"]),l(_,{flat:"",dense:"",icon:"mdi-delete-outline",color:"red-9",onClick:b=>o.remove(t.row.id),loading:o.loading,size:"sm"},null,8,["onClick","loading"]),l(_,{flat:"",dense:"",icon:"mdi-information-outline",color:"grey-9",onClick:b=>o.information(t.row),size:"sm"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"]),l(d,{modelValue:o.showModal,"onUpdate:modelValue":n[1]||(n[1]=t=>o.showModal=t),periodo:o.periodo,onSave:o.handleSave,loading:o.loading,isEditForm:o.formStatus,cursos:o.cursos,nome:"per\xEDodo"},null,8,["modelValue","periodo","onSave","loading","isEditForm","cursos"]),l(u,{modelValue:o.showModal2,"onUpdate:modelValue":n[2]||(n[2]=t=>o.showModal2=t),showInformation:o.PeriodoInfo,nome:"periodo"},null,8,["modelValue","showInformation"])])}var ae=Q(Vo,[["render",ko]]);export{ae as default};
